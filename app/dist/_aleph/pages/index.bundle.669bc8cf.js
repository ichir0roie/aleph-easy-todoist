(()=>{var E=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var w=(r,e,t)=>e in r?E(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,z=(r,e)=>{for(var t in e||(e={}))re.call(e,t)&&w(r,t,e[t]);if(I)for(var t of I(e))ae.call(e,t)&&w(r,t,e[t]);return r},O=(r,e)=>ee(r,te(e)),oe=r=>E(r,"__esModule",{value:!0});var ne=(r,e)=>{oe(r);for(var t in e)E(r,t,{get:e[t],enumerable:!0})};var W=(r,e,t)=>(w(r,typeof e!="symbol"?e+"":e,t),t),Z=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var M=(r,e,t)=>(Z(r,e,"read from private field"),t?t.call(r):e.get(r)),q=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},J=(r,e,t,a)=>(Z(r,e,"write to private field"),a?a.call(r,t):e.set(r,t),t);var P={};ne(P,{default:()=>Q});var x=class{constructor(e=[]){W(this,"rules");this.rules=e}addRule(e,t){return this.rules.push({test:e,fn:t}),this}tokenize(e,t=a=>a){function*a(n){let s=0;for(let m of n){let p=m.test(e);if(p){let{value:b,length:v}=p;s+=v,e=e.slice(v);let g=O(z({},m.fn(b)),{index:s});yield t(g),yield*a(n)}}}let c=a(this.rules),o=[];for(let n of c)o.push(n);if(e.length)throw new Error(`parser error: string not fully parsed! ${e.slice(0,25)}`);return o}};function f(r,e=2){return String(r).padStart(e,"0")}function i(r){return e=>e.startsWith(r)?{value:r,length:r.length}:void 0}function V(r){return e=>{let t=r.exec(e);if(t)return{value:t,length:t[0].length}}}var se=[{test:i("yyyy"),fn:()=>({type:"year",value:"numeric"})},{test:i("yy"),fn:()=>({type:"year",value:"2-digit"})},{test:i("MM"),fn:()=>({type:"month",value:"2-digit"})},{test:i("M"),fn:()=>({type:"month",value:"numeric"})},{test:i("dd"),fn:()=>({type:"day",value:"2-digit"})},{test:i("d"),fn:()=>({type:"day",value:"numeric"})},{test:i("HH"),fn:()=>({type:"hour",value:"2-digit"})},{test:i("H"),fn:()=>({type:"hour",value:"numeric"})},{test:i("hh"),fn:()=>({type:"hour",value:"2-digit",hour12:!0})},{test:i("h"),fn:()=>({type:"hour",value:"numeric",hour12:!0})},{test:i("mm"),fn:()=>({type:"minute",value:"2-digit"})},{test:i("m"),fn:()=>({type:"minute",value:"numeric"})},{test:i("ss"),fn:()=>({type:"second",value:"2-digit"})},{test:i("s"),fn:()=>({type:"second",value:"numeric"})},{test:i("SSS"),fn:()=>({type:"fractionalSecond",value:3})},{test:i("SS"),fn:()=>({type:"fractionalSecond",value:2})},{test:i("S"),fn:()=>({type:"fractionalSecond",value:1})},{test:i("a"),fn:r=>({type:"dayPeriod",value:r})},{test:V(/^(')(?<value>\\.|[^\']*)\1/),fn:r=>({type:"literal",value:r.groups.value})},{test:V(/^.+?\s*/),fn:r=>({type:"literal",value:r[0]})}],h,k=class{constructor(e,t=se){q(this,h,void 0);let a=new x(t);J(this,h,a.tokenize(e,({type:c,value:o,hour12:n})=>{let s={type:c,value:o};return n&&(s.hour12=n),s}))}format(e,t={}){let a="",c=t.timeZone==="UTC";for(let o of M(this,h))switch(o.type){case"year":{let s=c?e.getUTCFullYear():e.getFullYear();switch(o.value){case"numeric":{a+=s;break}case"2-digit":{a+=f(s,2).slice(-2);break}default:throw Error(`FormatterError: value "${o.value}" is not supported`)}break}case"month":{let s=(c?e.getUTCMonth():e.getMonth())+1;switch(o.value){case"numeric":{a+=s;break}case"2-digit":{a+=f(s,2);break}default:throw Error(`FormatterError: value "${o.value}" is not supported`)}break}case"day":{let s=c?e.getUTCDate():e.getDate();switch(o.value){case"numeric":{a+=s;break}case"2-digit":{a+=f(s,2);break}default:throw Error(`FormatterError: value "${o.value}" is not supported`)}break}case"hour":{let s=c?e.getUTCHours():e.getHours();switch(s-=o.hour12&&e.getHours()>12?12:0,o.value){case"numeric":{a+=s;break}case"2-digit":{a+=f(s,2);break}default:throw Error(`FormatterError: value "${o.value}" is not supported`)}break}case"minute":{let s=c?e.getUTCMinutes():e.getMinutes();switch(o.value){case"numeric":{a+=s;break}case"2-digit":{a+=f(s,2);break}default:throw Error(`FormatterError: value "${o.value}" is not supported`)}break}case"second":{let s=c?e.getUTCSeconds():e.getSeconds();switch(o.value){case"numeric":{a+=s;break}case"2-digit":{a+=f(s,2);break}default:throw Error(`FormatterError: value "${o.value}" is not supported`)}break}case"fractionalSecond":{let s=c?e.getUTCMilliseconds():e.getMilliseconds();a+=f(s,Number(o.value));break}case"timeZoneName":break;case"dayPeriod":{a+=o.value?e.getHours()>=12?"PM":"AM":"";break}case"literal":{a+=o.value;break}default:throw Error(`FormatterError: { ${o.type} ${o.value} }`)}return a}parseToParts(e){var a,c,o,n,s,m,p,b,v,g,D,$,H,A,Y,j,L;let t=[];for(let u of M(this,h)){let R=u.type,l="";switch(u.type){case"year":{switch(u.value){case"numeric":{l=(a=/^\d{1,4}/.exec(e))==null?void 0:a[0];break}case"2-digit":{l=(c=/^\d{1,2}/.exec(e))==null?void 0:c[0];break}}break}case"month":{switch(u.value){case"numeric":{l=(o=/^\d{1,2}/.exec(e))==null?void 0:o[0];break}case"2-digit":{l=(n=/^\d{2}/.exec(e))==null?void 0:n[0];break}case"narrow":{l=(s=/^[a-zA-Z]+/.exec(e))==null?void 0:s[0];break}case"short":{l=(m=/^[a-zA-Z]+/.exec(e))==null?void 0:m[0];break}case"long":{l=(p=/^[a-zA-Z]+/.exec(e))==null?void 0:p[0];break}default:throw Error(`ParserError: value "${u.value}" is not supported`)}break}case"day":{switch(u.value){case"numeric":{l=(b=/^\d{1,2}/.exec(e))==null?void 0:b[0];break}case"2-digit":{l=(v=/^\d{2}/.exec(e))==null?void 0:v[0];break}default:throw Error(`ParserError: value "${u.value}" is not supported`)}break}case"hour":{switch(u.value){case"numeric":{l=(g=/^\d{1,2}/.exec(e))==null?void 0:g[0],u.hour12&&parseInt(l)>12&&console.error("Trying to parse hour greater than 12. Use 'H' instead of 'h'.");break}case"2-digit":{l=(D=/^\d{2}/.exec(e))==null?void 0:D[0],u.hour12&&parseInt(l)>12&&console.error("Trying to parse hour greater than 12. Use 'HH' instead of 'hh'.");break}default:throw Error(`ParserError: value "${u.value}" is not supported`)}break}case"minute":{switch(u.value){case"numeric":{l=($=/^\d{1,2}/.exec(e))==null?void 0:$[0];break}case"2-digit":{l=(H=/^\d{2}/.exec(e))==null?void 0:H[0];break}default:throw Error(`ParserError: value "${u.value}" is not supported`)}break}case"second":{switch(u.value){case"numeric":{l=(A=/^\d{1,2}/.exec(e))==null?void 0:A[0];break}case"2-digit":{l=(Y=/^\d{2}/.exec(e))==null?void 0:Y[0];break}default:throw Error(`ParserError: value "${u.value}" is not supported`)}break}case"fractionalSecond":{l=(j=new RegExp(`^\\d{${u.value}}`).exec(e))==null?void 0:j[0];break}case"timeZoneName":{l=u.value;break}case"dayPeriod":{l=(L=/^(A|P)M/.exec(e))==null?void 0:L[0];break}case"literal":{if(!e.startsWith(u.value))throw Error(`Literal "${u.value}" not found "${e.slice(0,25)}"`);l=u.value;break}default:throw Error(`${u.type} ${u.value}`)}if(!l)throw Error(`value not valid for token { ${R} ${l} } ${e.slice(0,25)}`);t.push({type:R,value:l}),e=e.slice(l.length)}if(e.length)throw Error(`datetime string was not fully parsed! ${e.slice(0,25)}`);return t}sortDateTimeFormatPart(e){let t=[],a=["year","month","day","hour","minute","second","fractionalSecond"];for(let c of a){let o=e.findIndex(n=>n.type===c);o!==-1&&(t=t.concat(e.splice(o,1)))}return t=t.concat(e),t}partsToDate(e){let t=new Date,a=e.find(o=>o.type==="timeZoneName"&&o.value==="UTC"),c=e.find(o=>o.type==="day");a?t.setUTCHours(0,0,0,0):t.setHours(0,0,0,0);for(let o of e)switch(o.type){case"year":{let n=Number(o.value.padStart(4,"20"));a?t.setUTCFullYear(n):t.setFullYear(n);break}case"month":{let n=Number(o.value)-1;c?a?t.setUTCMonth(n,Number(c.value)):t.setMonth(n,Number(c.value)):a?t.setUTCMonth(n):t.setMonth(n);break}case"day":{let n=Number(o.value);a?t.setUTCDate(n):t.setDate(n);break}case"hour":{let n=Number(o.value),s=e.find(m=>m.type==="dayPeriod");(s==null?void 0:s.value)==="PM"&&(n+=12),a?t.setUTCHours(n):t.setHours(n);break}case"minute":{let n=Number(o.value);a?t.setUTCMinutes(n):t.setMinutes(n);break}case"second":{let n=Number(o.value);a?t.setUTCSeconds(n):t.setSeconds(n);break}case"fractionalSecond":{let n=Number(o.value);a?t.setUTCMilliseconds(n):t.setMilliseconds(n);break}}return t}parse(e){let t=this.parseToParts(e),a=this.sortDateTimeFormatPart(t);return this.partsToDate(a)}};h=new WeakMap;var ce=1e3,le=ce*60,ue=le*60,ie=ue*24,ge=ie*7;var B;(function(r){r[r.Sun=0]="Sun",r[r.Mon=1]="Mon",r[r.Tue=2]="Tue",r[r.Wed=3]="Wed",r[r.Thu=4]="Thu",r[r.Fri=5]="Fri",r[r.Sat=6]="Sat"})(B||(B={}));function G(r,e){let t=new k(e),a=t.parseToParts(r),c=t.sortDateTimeFormatPart(a);return t.partsToDate(c)}function y(r,e){return new k(e).format(r)}var S=localStorage.getItem("apiToken");async function C(r="",e=""){if(S==null)return null;let t=G(e,"yyyy/MM/dd"),a="https://api.todoist.com/rest/v1/tasks",c={content:r,due_string:y(t,"yyyy-MM-dd")},o=globalThis.crypto.randomUUID(),n={"Content-Type":"application/json","X-Request-Id":o,Authorization:"Bearer "+S};console.log(r),console.log(t),console.log(S);let s=await fetch(a,{method:"POST",headers:n,body:JSON.stringify(c)});return console.log(s),s}var{default:d,useState:U}=__ALEPH__.pack["https://esm.sh/react@17.0.2"];function N(){let[r,e]=U(y(new Date,"yyyy/MM/dd")),[t,a]=U(""),[c,o]=U("");function n(){console.log(t),C(t,r).then(async s=>{if(s!=null){console.log(s);var m=s.json();o(JSON.stringify(m))}})}return d.createElement("body",{className:"bg-right"},d.createElement("div",{className:"container"},d.createElement("h4",{className:"mb-3"},"add task"),d.createElement("div",{className:"col-md-8 order-md-1"},d.createElement(K,{label:"content",value:t,setValue:a}),d.createElement("button",{className:"btn btn-primary",onClick:n},"send"),d.createElement("div",{className:"col-md-6 mb-3"}),d.createElement(K,{label:"due date",value:r,setValue:e}),d.createElement("div",{className:"col-md-6 mb-3"},d.createElement("label",null)),d.createElement("div",{className:"col-md-6 mb-3"},d.createElement("label",null,"result"),d.createElement("div",{className:"card"},d.createElement("div",{className:"card-body"},d.createElement("p",{className:"card-text"},c)))))))}function K({label:r="",value:e="",setValue:t=null}){return d.createElement("div",{className:"col-md-6 mb-3"},d.createElement("label",null,r),d.createElement("input",{type:"text",className:"form-control",id:"firstName",value:e,onChange:a=>t(a.target.value)}))}var{default:de}=__ALEPH__.pack["https://deno.land/x/aleph@v0.3.0-beta.19/framework/react/components/CustomScript.ts"],{default:_}=__ALEPH__.pack["https://esm.sh/react@17.0.2"];function F(){return _.createElement("div",null,_.createElement("p",null,"loading..."),_.createElement(de,{src:"/js/googleAuth.js"}))}function X(){let r=localStorage.getItem("apiToken");return r??""}var{default:me}=__ALEPH__.pack["https://deno.land/x/aleph@v0.3.0-beta.19/framework/react/components/Head.ts"],{default:T,useEffect:Ue,useState:Ne}=__ALEPH__.pack["https://esm.sh/react@17.0.2"];function Q(){var r,e=X();return console.log(e),e!=null&&e!=""?r=N():r=F(),T.createElement("div",{className:"page"},T.createElement(me,null,T.createElement("title",null,"easy-todoist")),T.createElement("body",{className:"bg-right"},r))}__ALEPH__.pack["/pages/index.tsx"]=P;})();
