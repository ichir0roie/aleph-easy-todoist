(()=>{var E=Object.defineProperty,K=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var w=(r,e,t)=>e in r?E(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,R=(r,e)=>{for(var t in e||(e={}))Q.call(e,t)&&w(r,t,e[t]);if(z)for(var t of z(e))ee.call(e,t)&&w(r,t,e[t]);return r},L=(r,e)=>K(r,X(e)),te=r=>E(r,"__esModule",{value:!0});var re=(r,e)=>{te(r);for(var t in e)E(r,t,{get:e[t],enumerable:!0})};var I=(r,e,t)=>(w(r,typeof e!="symbol"?e+"":e,t),t),O=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var M=(r,e,t)=>(O(r,e,"read from private field"),t?t.call(r):e.get(r)),W=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},Z=(r,e,t,a)=>(O(r,e,"write to private field"),a?a.call(r,t):e.set(r,t),t);var F={};re(F,{default:()=>G});var x=class{constructor(e=[]){I(this,"rules");this.rules=e}addRule(e,t){return this.rules.push({test:e,fn:t}),this}tokenize(e,t=a=>a){function*a(s){let n=0;for(let m of s){let f=m.test(e);if(f){let{value:b,length:v}=f;n+=v,e=e.slice(v);let y=L(R({},m.fn(b)),{index:n});yield t(y),yield*a(s)}}}let c=a(this.rules),o=[];for(let s of c)o.push(s);if(e.length)throw new Error(`parser error: string not fully parsed! ${e.slice(0,25)}`);return o}};function h(r,e=2){return String(r).padStart(e,"0")}function i(r){return e=>e.startsWith(r)?{value:r,length:r.length}:void 0}function q(r){return e=>{let t=r.exec(e);if(t)return{value:t,length:t[0].length}}}var ae=[{test:i("yyyy"),fn:()=>({type:"year",value:"numeric"})},{test:i("yy"),fn:()=>({type:"year",value:"2-digit"})},{test:i("MM"),fn:()=>({type:"month",value:"2-digit"})},{test:i("M"),fn:()=>({type:"month",value:"numeric"})},{test:i("dd"),fn:()=>({type:"day",value:"2-digit"})},{test:i("d"),fn:()=>({type:"day",value:"numeric"})},{test:i("HH"),fn:()=>({type:"hour",value:"2-digit"})},{test:i("H"),fn:()=>({type:"hour",value:"numeric"})},{test:i("hh"),fn:()=>({type:"hour",value:"2-digit",hour12:!0})},{test:i("h"),fn:()=>({type:"hour",value:"numeric",hour12:!0})},{test:i("mm"),fn:()=>({type:"minute",value:"2-digit"})},{test:i("m"),fn:()=>({type:"minute",value:"numeric"})},{test:i("ss"),fn:()=>({type:"second",value:"2-digit"})},{test:i("s"),fn:()=>({type:"second",value:"numeric"})},{test:i("SSS"),fn:()=>({type:"fractionalSecond",value:3})},{test:i("SS"),fn:()=>({type:"fractionalSecond",value:2})},{test:i("S"),fn:()=>({type:"fractionalSecond",value:1})},{test:i("a"),fn:r=>({type:"dayPeriod",value:r})},{test:q(/^(')(?<value>\\.|[^\']*)\1/),fn:r=>({type:"literal",value:r.groups.value})},{test:q(/^.+?\s*/),fn:r=>({type:"literal",value:r[0]})}],p,g=class{constructor(e,t=ae){W(this,p,void 0);let a=new x(t);Z(this,p,a.tokenize(e,({type:c,value:o,hour12:s})=>{let n={type:c,value:o};return s&&(n.hour12=s),n}))}format(e,t={}){let a="",c=t.timeZone==="UTC";for(let o of M(this,p))switch(o.type){case"year":{let n=c?e.getUTCFullYear():e.getFullYear();switch(o.value){case"numeric":{a+=n;break}case"2-digit":{a+=h(n,2).slice(-2);break}default:throw Error(`FormatterError: value "${o.value}" is not supported`)}break}case"month":{let n=(c?e.getUTCMonth():e.getMonth())+1;switch(o.value){case"numeric":{a+=n;break}case"2-digit":{a+=h(n,2);break}default:throw Error(`FormatterError: value "${o.value}" is not supported`)}break}case"day":{let n=c?e.getUTCDate():e.getDate();switch(o.value){case"numeric":{a+=n;break}case"2-digit":{a+=h(n,2);break}default:throw Error(`FormatterError: value "${o.value}" is not supported`)}break}case"hour":{let n=c?e.getUTCHours():e.getHours();switch(n-=o.hour12&&e.getHours()>12?12:0,o.value){case"numeric":{a+=n;break}case"2-digit":{a+=h(n,2);break}default:throw Error(`FormatterError: value "${o.value}" is not supported`)}break}case"minute":{let n=c?e.getUTCMinutes():e.getMinutes();switch(o.value){case"numeric":{a+=n;break}case"2-digit":{a+=h(n,2);break}default:throw Error(`FormatterError: value "${o.value}" is not supported`)}break}case"second":{let n=c?e.getUTCSeconds():e.getSeconds();switch(o.value){case"numeric":{a+=n;break}case"2-digit":{a+=h(n,2);break}default:throw Error(`FormatterError: value "${o.value}" is not supported`)}break}case"fractionalSecond":{let n=c?e.getUTCMilliseconds():e.getMilliseconds();a+=h(n,Number(o.value));break}case"timeZoneName":break;case"dayPeriod":{a+=o.value?e.getHours()>=12?"PM":"AM":"";break}case"literal":{a+=o.value;break}default:throw Error(`FormatterError: { ${o.type} ${o.value} }`)}return a}parseToParts(e){var a,c,o,s,n,m,f,b,v,y,D,$,P,H,_,A,Y;let t=[];for(let u of M(this,p)){let j=u.type,l="";switch(u.type){case"year":{switch(u.value){case"numeric":{l=(a=/^\d{1,4}/.exec(e))==null?void 0:a[0];break}case"2-digit":{l=(c=/^\d{1,2}/.exec(e))==null?void 0:c[0];break}}break}case"month":{switch(u.value){case"numeric":{l=(o=/^\d{1,2}/.exec(e))==null?void 0:o[0];break}case"2-digit":{l=(s=/^\d{2}/.exec(e))==null?void 0:s[0];break}case"narrow":{l=(n=/^[a-zA-Z]+/.exec(e))==null?void 0:n[0];break}case"short":{l=(m=/^[a-zA-Z]+/.exec(e))==null?void 0:m[0];break}case"long":{l=(f=/^[a-zA-Z]+/.exec(e))==null?void 0:f[0];break}default:throw Error(`ParserError: value "${u.value}" is not supported`)}break}case"day":{switch(u.value){case"numeric":{l=(b=/^\d{1,2}/.exec(e))==null?void 0:b[0];break}case"2-digit":{l=(v=/^\d{2}/.exec(e))==null?void 0:v[0];break}default:throw Error(`ParserError: value "${u.value}" is not supported`)}break}case"hour":{switch(u.value){case"numeric":{l=(y=/^\d{1,2}/.exec(e))==null?void 0:y[0],u.hour12&&parseInt(l)>12&&console.error("Trying to parse hour greater than 12. Use 'H' instead of 'h'.");break}case"2-digit":{l=(D=/^\d{2}/.exec(e))==null?void 0:D[0],u.hour12&&parseInt(l)>12&&console.error("Trying to parse hour greater than 12. Use 'HH' instead of 'hh'.");break}default:throw Error(`ParserError: value "${u.value}" is not supported`)}break}case"minute":{switch(u.value){case"numeric":{l=($=/^\d{1,2}/.exec(e))==null?void 0:$[0];break}case"2-digit":{l=(P=/^\d{2}/.exec(e))==null?void 0:P[0];break}default:throw Error(`ParserError: value "${u.value}" is not supported`)}break}case"second":{switch(u.value){case"numeric":{l=(H=/^\d{1,2}/.exec(e))==null?void 0:H[0];break}case"2-digit":{l=(_=/^\d{2}/.exec(e))==null?void 0:_[0];break}default:throw Error(`ParserError: value "${u.value}" is not supported`)}break}case"fractionalSecond":{l=(A=new RegExp(`^\\d{${u.value}}`).exec(e))==null?void 0:A[0];break}case"timeZoneName":{l=u.value;break}case"dayPeriod":{l=(Y=/^(A|P)M/.exec(e))==null?void 0:Y[0];break}case"literal":{if(!e.startsWith(u.value))throw Error(`Literal "${u.value}" not found "${e.slice(0,25)}"`);l=u.value;break}default:throw Error(`${u.type} ${u.value}`)}if(!l)throw Error(`value not valid for token { ${j} ${l} } ${e.slice(0,25)}`);t.push({type:j,value:l}),e=e.slice(l.length)}if(e.length)throw Error(`datetime string was not fully parsed! ${e.slice(0,25)}`);return t}sortDateTimeFormatPart(e){let t=[],a=["year","month","day","hour","minute","second","fractionalSecond"];for(let c of a){let o=e.findIndex(s=>s.type===c);o!==-1&&(t=t.concat(e.splice(o,1)))}return t=t.concat(e),t}partsToDate(e){let t=new Date,a=e.find(o=>o.type==="timeZoneName"&&o.value==="UTC"),c=e.find(o=>o.type==="day");a?t.setUTCHours(0,0,0,0):t.setHours(0,0,0,0);for(let o of e)switch(o.type){case"year":{let s=Number(o.value.padStart(4,"20"));a?t.setUTCFullYear(s):t.setFullYear(s);break}case"month":{let s=Number(o.value)-1;c?a?t.setUTCMonth(s,Number(c.value)):t.setMonth(s,Number(c.value)):a?t.setUTCMonth(s):t.setMonth(s);break}case"day":{let s=Number(o.value);a?t.setUTCDate(s):t.setDate(s);break}case"hour":{let s=Number(o.value),n=e.find(m=>m.type==="dayPeriod");(n==null?void 0:n.value)==="PM"&&(s+=12),a?t.setUTCHours(s):t.setHours(s);break}case"minute":{let s=Number(o.value);a?t.setUTCMinutes(s):t.setMinutes(s);break}case"second":{let s=Number(o.value);a?t.setUTCSeconds(s):t.setSeconds(s);break}case"fractionalSecond":{let s=Number(o.value);a?t.setUTCMilliseconds(s):t.setMilliseconds(s);break}}return t}parse(e){let t=this.parseToParts(e),a=this.sortDateTimeFormatPart(t);return this.partsToDate(a)}};p=new WeakMap;var oe=1e3,se=oe*60,ne=se*60,ce=ne*24,he=ce*7;var J;(function(r){r[r.Sun=0]="Sun",r[r.Mon=1]="Mon",r[r.Tue=2]="Tue",r[r.Wed=3]="Wed",r[r.Thu=4]="Thu",r[r.Fri=5]="Fri",r[r.Sat=6]="Sat"})(J||(J={}));function V(r,e){let t=new g(e),a=t.parseToParts(r),c=t.sortDateTimeFormatPart(a);return t.partsToDate(c)}function k(r,e){return new g(e).format(r)}var S="9526b5ebe4706e61e07f8adf74517e7a67d2aa12";async function U(r="",e=""){let t=V(e,"yyyy/MM/dd"),a="https://api.todoist.com/rest/v1/tasks",c={content:r,due_string:k(t,"yyyy-MM-dd")},o=globalThis.crypto.randomUUID(),s={"Content-Type":"application/json","X-Request-Id":o,Authorization:"Bearer "+S};console.log(r),console.log(t),console.log(S);let n=await fetch(a,{method:"POST",headers:s,body:JSON.stringify(c)});return console.log(n),n}var{default:d,useState:C}=__ALEPH__.pack["https://esm.sh/react@17.0.2"];function N({size:r=75}){let[e,t]=C(k(new Date,"yyyy/MM/dd")),[a,c]=C(""),[o,s]=C("");function n(){console.log(a),U(a,e).then(async m=>{console.log(m);let f=await m.json();s(JSON.stringify(f))})}return d.createElement("body",{className:"bg-right"},d.createElement("div",{className:"container"},d.createElement("h4",{className:"mb-3"},"add task"),d.createElement("div",{className:"col-md-8 order-md-1"},d.createElement(B,{label:"content",value:a,setValue:c}),d.createElement("button",{className:"btn btn-primary",onClick:n},"send"),d.createElement("div",{className:"col-md-6 mb-3"}),d.createElement(B,{label:"due date",value:e,setValue:t}),d.createElement("div",{className:"col-md-6 mb-3"},d.createElement("label",null)),d.createElement("div",{className:"col-md-6 mb-3"},d.createElement("label",null,"result"),d.createElement("div",{className:"card"},d.createElement("div",{className:"card-body"},d.createElement("p",{className:"card-text"},o)))))))}function B({label:r="",value:e="",setValue:t=null}){return d.createElement("div",{className:"col-md-6 mb-3"},d.createElement("label",null,r),d.createElement("input",{type:"text",className:"form-control",id:"firstName",value:e,onChange:a=>t(a.target.value)}))}var{default:le}=__ALEPH__.pack["https://deno.land/x/aleph@v0.3.0-beta.19/framework/react/components/Head.ts"],{default:T}=__ALEPH__.pack["https://esm.sh/react@17.0.2"];function G(){return T.createElement("div",{className:"page"},T.createElement(le,null,T.createElement("title",null,"easy-todoist")),T.createElement(N,null))}__ALEPH__.pack["/pages/index.tsx"]=F;})();
